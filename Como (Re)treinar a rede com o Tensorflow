Como (Re)treinar a rede com o Tensorflow

1. Configurar o MobileNet (reciclagem)
-> No shell do linux
IMAGE_SIZE=224
ARCHITECTURE="inception_v4_${IMAGE_SIZE}"

2. Iniciar o TensorBoard
tensorboard --logdir tf_files/training_summaries &
-> se estiver rodando: pkill -f "tensorboard" e depois inicie o tensorboard

3. Investigando o script de retraining
python -m scripts.retrain -h

4. Retreinando
python -m scripts.retrain \
  --bottleneck_dir=tf_files/bottlenecks \
  --how_many_training_steps=500 \
  --model_dir=tf_files/models/ \
  --summaries_dir=tf_files/training_summaries/"${ARCHITECTURE}" \
  --output_graph=tf_files/retrained_graph.pb \
  --output_labels=tf_files/retrained_labels.txt \
  --architecture="${ARCHITECTURE}" \
  --image_dir=tf_files/tomato_photos

python -m scripts.retrain \
  --image_dir=tf_files/tomato_photos
  --model_dir=tf_files/models/ \
  --summaries_dir=tf_files/training_summaries/"${ARCHITECTURE}" \
  --output_graph=tf_files/retrained_graph.pb \
  --output_labels=tf_files/retrained_labels.txt \
  --how_many_training_steps=10000 \
  --learning_rate=0.005 \
  --testing_percentage=0.8 \
  --validation_percentage=0.2 \
  --architecture="${ARCHITECTURE}" 
   

4000 iterações
python -m scripts.retrain \
  --bottleneck_dir=tf_files/bottlenecks \
  --model_dir=tf_files/models/"${ARCHITECTURE}" \
  --summaries_dir=tf_files/training_summaries/"${ARCHITECTURE}" \
  --output_graph=tf_files/retrained_graph.pb \
  --output_labels=tf_files/retrained_labels.txt \
  --architecture="${ARCHITECTURE}" \
  --image_dir=tf_files/tomato_photos


Usando o modelo retreinado
 
    --graph=tf_files/retrained_graph.pb  \
    --image=tf_files/tomato_photos/
